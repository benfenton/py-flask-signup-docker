branches:
  only:
    - master
    - develop
before_install:
  - sudo apt-get install -y python-dev
  - sudo pip install awsebcli
   
before_script:
  - mkdir -p ~/.aws
  - echo '[profile eb-cli]' > ~/.aws/config
  - echo "aws_access_key_id = $AWSAccessKeyId" >> ~/.aws/config
  - echo "aws_secret_access_key = $AWSSecretKey" >> ~/.aws/config
script:
  - npm test
commit_container: manonthemat/epione
after_success:
  - eb init && eb deploy --timeout 20
notifications:
  email: false